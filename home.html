<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BeefMusic ‚Äì Crea canciones desde peticiones</title>

  <!-- Fuente futurista y limpia -->
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="page">
   <div class="header-actions">
  <div class="user-profile">
    <div class="user-avatar" id="user-avatar">U</div>
    <div class="user-profile-text">
      <span class="user-profile-label">Conectado</span>
      <span class="user-profile-name" id="user-name-display">@usuario</span>
    </div>
  </div>

  <button class="btn btn-ghost" id="open-request-1">
    Enviar petici√≥n
  </button>
  <button class="btn btn-primary">
    <span class="btn-icon">‚ñ∂</span>
    Ver canciones
  </button>
  <button class="btn btn-ghost" id="user-logout-btn">
    Cerrar sesi√≥n
  </button>
</div>
       <!-- HERO -->
    <section class="hero">
      <div class="hero-left">
        <div class="hero-kicker">
          <div class="hero-kicker-dot"></div>
          <span>Taller de temas a la carta</span>
        </div>

        <h1 class="hero-title">
          <span class="hero-title-main">BEEF</span>
          <span class="hero-title-sub">MUSIC</span>
        </h1>

        <div class="hero-highlight">
          Me mandas la idea ‚Üí pasa por Discord ‚Üí sale convertida en canci√≥n
        </div>

        <p class="hero-desc">
          <strong>BeefMusic</strong> es un sitio donde las historias de la gente acaban
          hechas canci√≥n. T√∫ escribes la movida que quieres contar, la petici√≥n entra
          en el <strong>Discord</strong> y desde ah√≠ se trabaja hasta que sale un tema
          listo para escuchar y compartir desde la web.
        </p>

        <div class="hero-actions">
          <button class="btn btn-primary" id="open-request-2">
            <span class="btn-icon">‚úâ</span>
            Enviar petici√≥n ahora
          </button>
          <button class="btn btn-ghost">
            Ver √∫ltimas canciones
          </button>
        </div>

        <div class="hero-meta">
          <div class="hero-meta-item">
            <span>Comunidad</span>
            <div><span class="hero-meta-accent">+200</span> ideas convertidas en letras y beats</div>
          </div>
          <div class="hero-meta-item">
            <span>Estilo</span>
            <div>Beefs, diss, drill, dembow, trap y lo que se venga</div>
          </div>
        </div>
      </div>

      <!-- HERO VISUAL -->
      <div class="hero-right">
        <div class="hero-visual">
          <div class="hero-visual-overlay"></div>
          <div class="hero-visual-main">
            <div class="hero-visual-content">
              <div class="hero-tag">Beats, letras y piques</div>

              <div class="hero-character-silhouette">
                <div class="hero-character-circle"></div>
              </div>

              <div class="hero-chip-row">
                <div class="hero-chip">
                  <div class="hero-chip-label">Estado</div>
                  <div class="hero-chip-value">
                    <span class="hero-chip-dot"></span>
                    Aceptando nuevas historias
                  </div>
                </div>
                <div class="hero-chip">
                  <div class="hero-chip-label">Modo</div>
                  <div class="hero-chip-value">Beat a medida + letra si hace falta</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- C√ìMO FUNCIONA -->
    <section id="como-funciona" class="section">
      <div class="section-header">
        <div class="section-kicker">Flow BeefMusic</div>
        <h2 class="section-title">De lo que cuentas al tema final</h2>
        <p class="section-subtitle">
          Aqu√≠ no hay plantillas: cada canci√≥n sale de una historia real que alguien ha pedido.
          Todo pasa por la web, por Discord y acaba guardado en la colecci√≥n de BeefMusic.
        </p>
      </div>

      <div class="grid-3">
        <article class="feature-card">
          <div class="feature-icon">1</div>
          <h3 class="feature-title">Manda la historia</h3>
          <p class="feature-desc">
            Rellena el formulario con nombres, detalles, frases que quieras que salgan
            y el estilo que te gusta. La petici√≥n llega directa a un canal privado
            del servidor de Discord.
          </p>
        </article>

        <article class="feature-card">
          <div class="feature-icon">2</div>
          <h3 class="feature-title">Se cocina en Discord</h3>
          <p class="feature-desc">
            Se revisa la petici√≥n, se decide el enfoque, se monta el beat, se escribe la letra
            y se ajusta todo para que suene como tiene que sonar: serio y con actitud.
          </p>
        </article>

        <article class="feature-card">
          <div class="feature-icon">3</div>
          <h3 class="feature-title">Sale a la luz</h3>
          <p class="feature-desc">
            Cuando el tema est√° listo, se sube a BeefMusic con su portada y detalles.
            As√≠ puedes escucharlo, compartirlo y ense√±ar de d√≥nde sali√≥ la idea.
          </p>
        </article>
      </div>
    </section>

    <!-- STATS -->
    <section id="stats" class="stats-section section">
      <div class="stats-header">
        <div>
          <div class="section-kicker">Actividad del proyecto</div>
          <h2 class="stats-title">C√≥mo se est√° moviendo BeefMusic</h2>
        </div>
        <div class="stats-tagline">
          Cada vez que entra una petici√≥n nueva o se publica un tema, estos n√∫meros cambian.
        </div>
      </div>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-label">Canciones en la colecci√≥n</div>
          <div class="stat-value">120+</div>
          <div class="stat-extra">Temas montados a partir de historias reales.</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Peticiones totales</div>
          <div class="stat-value">480+</div>
          <div class="stat-extra">Ideas que han pasado por la web y por Discord.</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Gente implicada</div>
          <div class="stat-value">15</div>
          <div class="stat-extra">Productores, voces, composici√≥n y mezcla.</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Sabores distintos</div>
          <div class="stat-value">8+</div>
          <div class="stat-extra">Trap, drill, reggaet√≥n, dembow, boom bap y m√°s.</div>
        </div>
      </div>
    </section>

    <!-- CANCIONES -->
    <section id="canciones" class="section">
      <div class="section-header">
        <div class="section-kicker">√öltimos lanzamientos</div>
        <h2 class="section-title">Algunos de los temas que han salido de aqu√≠</h2>
        <p class="section-subtitle">
          De momento son ejemplos, pero la idea es que esta secci√≥n se alimente sola con
          las canciones que se vayan publicando desde las peticiones reales.
        </p>
      </div>

      <div class="songs-grid">
        <!-- Song 1 -->
        <article class="song-card">
          <div class="song-thumb">
            <div class="song-wave"></div>
          </div>
          <div class="song-body">
            <div class="song-title">‚ÄúC√≥digo de Barrio‚Äù</div>
            <div class="song-meta">
              <span>Estilo: Drill</span>
              <span>Duraci√≥n: 3:02</span>
            </div>
            <div class="song-req">
              Petici√≥n de <strong>@user_404</strong> ‚Äì historia de lealtad, movidas en el bloque
              y alguien que ya no es de fiar.
            </div>
            <div class="song-meta">
              <span class="song-badge">Publicada</span>
              <span>Ver detalles ‚Üí</span>
            </div>
          </div>
        </article>

        <!-- Song 2 -->
        <article class="song-card">
          <div class="song-thumb">
            <div class="song-wave"></div>
          </div>
          <div class="song-body">
            <div class="song-title">‚ÄúDembow del Server‚Äù</div>
            <div class="song-meta">
              <span>Estilo: Dembow</span>
              <span>Duraci√≥n: 2:41</span>
            </div>
            <div class="song-req">
              Petici√≥n de <strong>@maria_beats</strong> ‚Äì tema r√°pido y pegado para
              levantar el Discord a las tantas.
            </div>
            <div class="song-meta">
              <span class="song-badge">Publicada</span>
              <span>Escuchar ‚Üí</span>
            </div>
          </div>
        </article>

        <!-- Song 3 -->
        <article class="song-card">
          <div class="song-thumb">
            <div class="song-wave"></div>
          </div>
          <div class="song-body">
            <div class="song-title">‚ÄúBeef Digital‚Äù</div>
            <div class="song-meta">
              <span>Estilo: Trap</span>
              <span>Duraci√≥n: 3:28</span>
            </div>
            <div class="song-req">
              Petici√≥n an√≥nima ‚Äì diss en clave de juego contra un rival del server,
              todo en modo roleplay.
            </div>
            <div class="song-meta">
              <span class="song-badge">En revisi√≥n</span>
              <span>Pr√≥ximamente</span>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- DISCORD / CTA -->
    <section id="discord" class="section">
      <div class="stats-section">
        <div class="stats-header">
          <div>
            <div class="section-kicker">Comunidad</div>
            <h2 class="stats-title">Tu petici√≥n acaba en el Discord y vuelve hecha canci√≥n</h2>
          </div>
          <div class="stats-tagline">
            Cada idea que mandas desde la web se guarda y se manda a un canal del servidor,
            donde se revisa y se decide c√≥mo convertirla en tema.
          </div>
        </div>

        <div class="hero-actions">
          <button class="btn btn-primary" id="open-request-3">
            Enviar mi primera petici√≥n
          </button>
          <button class="btn btn-ghost">
            Unirme al servidor de Discord
          </button>
        </div>
      </div>
    </section>
    <!-- FOOTER -->
    <footer>
      <span>¬© <span id="year"></span> BeefMusic. Todos los derechos reservados.</span>
      <div class="footer-links">
        <a href="#">T√©rminos</a>
        <a href="#">Privacidad</a>
        <a href="#">Contacto</a>
      </div>
    </footer>
  </div>

  <!-- MODAL PETICI√ìN -->
  <div class="modal-backdrop" id="request-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">Enviar petici√≥n de canci√≥n</h3>
        <button class="modal-close" id="modal-close">‚úï</button>
      </div>
      <p class="modal-desc">
        Describe qu√© tipo de canci√≥n quieres y qu√© historia debe contar.
        Esta petici√≥n se enviar√° a un canal de Discord desde tu backend.
      </p>

      <form id="request-form">
        <div class="field">
          <label for="nick">Tu nick o usuario</label>
          <input id="nick" name="nick" type="text" placeholder="@tu_usuario" required />
        </div>
        <div class="field">
          <label for="style">Estilo / g√©nero</label>
          <input id="style" name="style" type="text" placeholder="Drill, trap, dembow, boom bap‚Ä¶" required />
        </div>
        <div class="field">
          <label for="idea">Idea de la canci√≥n</label>
          <textarea id="idea" name="idea" rows="4" placeholder="Cu√©ntanos la historia, nombres, frases clave, referencias..." required></textarea>
          <small>Ejemplo: beef amistoso, historia de amor, intro para tu canal, etc.</small>
        </div>

        <div class="modal-footer">
          <span class="modal-status" id="modal-status">
            (Aqu√≠ conectar√°s con tu API para mandarlo al canal de Discord.)
          </span>
          <button class="btn btn-primary" type="submit">
            Enviar petici√≥n
          </button>
        </div>
      </form>
    </div>
  </div>
 <script>
  // üîí Si no hay sesi√≥n de usuario, fuera del home
  (function () {
    const userToken = localStorage.getItem("beefmusic_user_token");
    if (!userToken) {
      window.location.href = "user-login.html";
    }
  })();

   // üë§ Mostrar el nombre de usuario en el header, avatar e autocompletar nick
  const storedUserName = localStorage.getItem("beefmusic_user_name");
  if (storedUserName) {
    const userNameDisplay = document.getElementById("user-name-display");
    if (userNameDisplay) {
      userNameDisplay.textContent = "@" + storedUserName;
    }

    const avatarEl = document.getElementById("user-avatar");
    if (avatarEl) {
      avatarEl.textContent = storedUserName.charAt(0).toUpperCase();
    }

    const nickInput = document.getElementById("nick");
    if (nickInput && !nickInput.value) {
      nickInput.value = "@" + storedUserName;
    }
  }

  // A√±o din√°mico en el footer
  document.getElementById("year").textContent = new Date().getFullYear();

  // Modal l√≥gica simple
  const modal = document.getElementById("request-modal");
  const statusEl = document.getElementById("modal-status");

  function openModal() {
    modal.style.display = "flex";
    statusEl.textContent = "(Aqu√≠ conectar√°s con tu API para mandarlo al canal de Discord.)";
  }

  function closeModal() {
    modal.style.display = "none";
  }

  document.getElementById("open-request-1").addEventListener("click", openModal);
  document.getElementById("open-request-2").addEventListener("click", openModal);
  document.getElementById("open-request-3").addEventListener("click", openModal);
  document.getElementById("modal-close").addEventListener("click", closeModal);

  modal.addEventListener("click", (e) => {
    if (e.target === modal) closeModal();
  });

  // ‚úÖ Env√≠o REAL del formulario a tu backend
  document.getElementById("request-form").addEventListener("submit", function (e) {
    e.preventDefault();

    const data = {
      nick: this.nick.value,
      style: this.style.value,
      idea: this.idea.value,
    };

    statusEl.textContent = "Enviando petici√≥n...";

    fetch("http://localhost:4000/api/peticiones", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data),
    })
      .then((res) => res.json())
      .then((json) => {
        if (json.error) {
          statusEl.textContent = "‚ùå Error: " + json.error;
        } else {
          statusEl.textContent =
            "‚úÖ Petici√≥n enviada correctamente. ID: " + json.id;
          this.reset();

          // si tenemos username guardado, volvemos a rellenar el nick
          const storedUserName = localStorage.getItem("beefmusic_user_name");
          if (storedUserName) {
            this.nick.value = "@" + storedUserName;
          }
        }
      })
      .catch((err) => {
        console.error(err);
        statusEl.textContent = "‚ùå Error enviando la petici√≥n.";
      });
  });

  const userLogoutBtn = document.getElementById("user-logout-btn");
  if (userLogoutBtn) {
    userLogoutBtn.addEventListener("click", () => {
      localStorage.removeItem("beefmusic_user_token");
      localStorage.removeItem("beefmusic_user_name");
      window.location.href = "user-login.html";
    });
  }
</script>
</body>
</html>
